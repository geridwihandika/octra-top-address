<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOP ADDRESS OCTRA - WEB3 EXPLORER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&family=JetBrains+Mono&display=swap');

        :root {
            --neon-blue: #00d2ff;
            --neon-purple: #9d50bb;
            --glass-bg: rgba(13, 17, 23, 0.7);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: radial-gradient(circle at top right, #1a1a2e, #0f0f1a, #050505);
            background-attachment: fixed;
            color: #e2e8f0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .nebula {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://www.transparenttextures.com/patterns/stardust.png');
            opacity: 0.3;
            z-index: -1;
            pointer-events: none;
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* Responsive Table Magic */
        @media (max-width: 768px) {
            thead { display: none; } /* Sembunyikan header tabel di mobile */
            tr { 
                display: block; 
                margin-bottom: 1rem; 
                padding: 1rem 0;
            }
            td { 
                display: flex; 
                justify-content: space-between; 
                align-items: center;
                padding: 0.5rem 1.5rem !important;
                border: none !important;
                text-align: right !important;
            }
            /* Menambahkan label otomatis menggunakan pseudo-element */
            td::before {
                content: attr(data-label);
                font-size: 0.7rem;
                text-transform: uppercase;
                color: #94a3b8;
                font-weight: 700;
                margin-right: 1rem;
                text-align: left;
            }
            .address-cell { flex-direction: column; align-items: flex-end; }
        }

        .search-container {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(0, 210, 255, 0.4);
            box-shadow: 0 0 15px rgba(0, 210, 255, 0.1);
            transition: all 0.3s ease;
        }

        .rank-badge {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            padding: 4px 10px;
            border-radius: 8px;
            color: var(--neon-blue);
            font-weight: 700;
            border: 1px solid rgba(0, 210, 255, 0.2);
            font-size: 0.8rem;
        }

        .font-code { font-family: 'JetBrains Mono', monospace; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade { animation: fadeIn 0.5s ease forwards; }
    </style>
</head>
<body>

    <div class="nebula"></div>

    <div class="max-w-6xl mx-auto px-4 py-6 md:py-16">
        
        <div class="flex flex-col lg:flex-row justify-between items-center gap-6 mb-8 md:mb-12 text-center lg:text-left">
            <div class="w-full lg:w-auto">
                <h1 class="text-3xl md:text-5xl font-extrabold tracking-tighter bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500 mb-2">
                    TOP ADDRESS OCTRA
                </h1>
                <p class="text-slate-500 text-[10px] md:text-xs font-semibold tracking-[0.2em] md:tracking-[0.3em] uppercase">
                    Created By 
                    <a href="https://t.me/FARM3R_ID" target="_blank" class="text-white hover:text-[#FFEF00] transition-colors duration-300">
                        FARM3R
                    </a> 
                    Community
                </p>
            </div>
            
            <div class="search-container flex items-center gap-2 p-1.5 md:p-2 rounded-2xl w-full lg:max-w-[500px]">
                <div class="pl-3 text-blue-400/50"><i class="fas fa-satellite-dish text-sm"></i></div>
                <input type="text" id="globalSearchInput" placeholder="Enter Address (Top 5,000)..." 
                    class="w-full bg-transparent border-none text-xs md:text-sm text-blue-100 placeholder-slate-500 focus:outline-none py-2">
                <button onclick="performGlobalSearch()" class="bg-gradient-to-r from-blue-600 to-blue-500 text-white text-[10px] font-bold px-4 md:px-6 py-2 md:py-2.5 rounded-xl uppercase transition-all active:scale-95">
                    Scan
                </button>
            </div>
        </div>

        <div class="glass-card mb-8 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="hidden md:table-header-group">
                        <tr class="text-slate-400 border-b border-white/10">
                            <th class="px-6 py-5 w-28 text-center">Rank</th>
                            <th class="px-8 py-5">Wallet Address</th>
                            <th class="px-8 py-5 text-right">Balance (OCT)</th>
                            <th class="px-8 py-5 text-center">Activity</th>
                        </tr>
                    </thead>
                    <tbody id="addr-list" class="divide-y divide-white/5 font-medium">
                        </tbody>
                </table>
            </div>
        </div>

        <div id="pagination-container" class="flex flex-col md:flex-row justify-between items-center gap-6 mb-10">
            <div class="flex items-center gap-1.5 bg-white/5 p-1.5 rounded-2xl border border-white/10 order-2 md:order-1">
                <button onclick="changePage(-1)" id="prev" class="p-2.5 text-slate-400 hover:text-blue-400 disabled:opacity-20"><i class="fas fa-chevron-left"></i></button>
                <div id="page-numbers" class="flex items-center gap-1.5"></div>
                <button onclick="changePage(1)" id="next" class="p-2.5 text-slate-400 hover:text-blue-400"><i class="fas fa-chevron-right"></i></button>
            </div>

            <div class="flex items-center gap-3 order-1 md:order-2">
                <div class="bg-blue-500/10 border border-blue-500/20 px-4 py-2 rounded-xl">
                    <span id="page-info-text" class="text-[10px] font-bold text-blue-400 uppercase tracking-widest text-center">Page 1</span>
                </div>
                <button onclick="resetList()" id="back-btn" class="hidden text-[10px] bg-white/10 px-4 py-2.5 rounded-xl text-white font-bold uppercase border border-white/10">
                    <i class="fas fa-undo-alt mr-2"></i> Reset
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentPage = 1;
        const limit = 100;

        async function loadData() {
            const container = document.getElementById('addr-list');
            container.innerHTML = `<tr><td colspan="4" class="text-center py-20"><i class="fas fa-circle-notch animate-spin text-2xl text-blue-500"></i></td></tr>`;
            try {
                const response = await fetch(`https://network.octrascan.com/addresses?page=${currentPage}&page_size=${limit}`);
                const data = await response.json();
                render(data.items);
                renderPagination();
                updateUI(false);
            } catch (err) {
                container.innerHTML = '<tr><td colspan="4" class="text-center py-20 text-red-500">Connection Error.</td></tr>';
            }
        }

        function render(items) {
            const container = document.getElementById('addr-list');
            container.innerHTML = items.map((item, i) => {
                let displayRank = item.isSearchResult ? item.rank : (((currentPage - 1) * limit) + (i + 1)).toLocaleString();
                const rawBalance = parseFloat(item.balance_oct) / 1000000;
                
                // Gunakan data-label untuk mobile responsiveness
                return `
                    <tr class="row-hover animate-fade">
                        <td data-label="Rank" class="px-6 py-4 md:py-6 text-center">
                            <span class="${!displayRank.includes('RANK') ? 'rank-badge' : 'text-slate-600 text-[10px] font-bold italic'}">
                                ${displayRank}
                            </span>
                        </td>
                        <td data-label="Address" class="px-6 py-4 md:px-8 md:py-6">
                            <div class="flex items-center gap-2 justify-end md:justify-start">
                                <span class="font-code text-[11px] md:text-[13px] text-blue-100/80 truncate max-w-[120px] md:max-w-none select-all">${item.address}</span>
                                <button onclick="copyAddr('${item.address}')" class="text-slate-600 hover:text-blue-400"><i class="far fa-copy text-xs"></i></button>
                            </div>
                        </td>
                        <td data-label="Balance" class="px-6 py-4 md:px-8 md:py-6 text-right">
                            <span class="font-code text-sm md:text-base font-bold text-white">${Math.floor(rawBalance).toLocaleString('en-US')}</span>
                            <span class="text-[9px] text-blue-500 ml-1 font-bold">OCT</span>
                        </td>
                        <td data-label="Activity" class="px-6 py-4 md:px-8 md:py-6 text-center">
                            <span class="bg-emerald-500/10 text-emerald-500 px-3 py-1 rounded-full text-[10px] font-bold border border-emerald-500/20">
                                ${item.transactions.toLocaleString()} TXS
                            </span>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Fungsi lainnya tetap sama
        async function performGlobalSearch() {
            const address = document.getElementById('globalSearchInput').value.trim();
            if (!address) return;
            const container = document.getElementById('addr-list');
            container.innerHTML = `<tr><td colspan="4" class="text-center py-20 text-blue-400 uppercase text-xs font-bold animate-pulse">Scanning...</td></tr>`;
            try {
                const resAddr = await fetch(`https://network.octrascan.com/addresses/${address}`);
                if (!resAddr.ok) { container.innerHTML = '<tr><td colspan="4" class="text-center py-20 text-red-400 font-bold uppercase">Not Found.</td></tr>'; return; }
                const targetData = await resAddr.json();
                let foundRank = null;
                for (let p = 1; p <= 50; p++) {
                    const resList = await fetch(`https://network.octrascan.com/addresses?page=${p}&page_size=100`);
                    const listData = await resList.json();
                    const index = listData.items.findIndex(i => i.address.toLowerCase() === address.toLowerCase());
                    if (index !== -1) { foundRank = ((p - 1) * 100) + (index + 1); break; }
                }
                targetData.rank = foundRank ? foundRank.toLocaleString() : "RANK > 5,000";
                targetData.isSearchResult = true;
                render([targetData]);
                updateUI(true);
            } catch (err) { container.innerHTML = '<tr><td colspan="4" class="text-center py-20 text-red-500">Error.</td></tr>'; }
        }

        function renderPagination() {
            const container = document.getElementById('page-numbers');
            container.innerHTML = '';
            let startPage = Math.max(1, currentPage - 1);
            for (let i = startPage; i <= startPage + 2; i++) {
                const btn = document.createElement('button');
                btn.innerText = i;
                btn.className = `w-8 h-8 md:w-10 md:h-10 rounded-xl text-[10px] md:text-[11px] font-bold border ${i === currentPage ? 'bg-blue-600 border-blue-500 text-white' : 'border-white/5 text-slate-500'}`;
                btn.onclick = () => { currentPage = i; loadData(); window.scrollTo({top:0, behavior:'smooth'}); };
                container.appendChild(btn);
            }
        }

        function updateUI(isSearching) {
            document.getElementById('page-info-text').innerText = `PAGE ${currentPage}`;
            document.getElementById('prev').disabled = (currentPage === 1);
            const backBtn = document.getElementById('back-btn');
            const pgArea = [document.getElementById('page-numbers'), document.getElementById('prev'), document.getElementById('next')];
            if (isSearching) { backBtn.classList.remove('hidden'); pgArea.forEach(el => el.classList.add('hidden')); } 
            else { backBtn.classList.add('hidden'); pgArea.forEach(el => el.classList.remove('hidden')); }
        }

        function copyAddr(txt) { navigator.clipboard.writeText(txt); }
        function resetList() { document.getElementById('globalSearchInput').value = ''; currentPage = 1; loadData(); }
        function changePage(s) { if (currentPage + s < 1) return; currentPage += s; loadData(); }
        document.getElementById('globalSearchInput').addEventListener('keypress', (e) => { if (e.key === 'Enter') performGlobalSearch(); });
        loadData();
    </script>
</body>
</html>
